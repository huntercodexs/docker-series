server {
    listen 80;
    listen 443 ssl http2;
    server_name proxy.servername.test;
    index index.html index.htm index.php index.js index.py index.jsp index.asp;

    root /var/www/html;

    error_page 404 /404.html;

    # Path for SSL config/key/certificate
    ssl_certificate /etc/ssl/certs/nginx/proxy.crt;
    ssl_certificate_key /etc/ssl/certs/nginx/proxy.key;
    ssl_certificate /etc/ssl/certs/nginx/app1.crt;
    ssl_certificate_key /etc/ssl/certs/nginx/app1.key;
    ssl_certificate /etc/ssl/certs/nginx/app2.crt;
    ssl_certificate_key /etc/ssl/certs/nginx/app2.key;
    include /etc/nginx/includes/proxy.conf;
    include /etc/nginx/includes/ssl.conf;

    location = /404.html {
        allow all;
    }

    location /404 {
        return 404;
    }

    location / {
        try_files $uri $uri/ /index.html?$query_string;
    }

    location /app1/ {
        #try_files $uri $uri/ /index.html?$query_string;
        proxy_pass http://nginx-reverse-proxy-app1;
        proxy_redirect http://nginx-reverse-proxy-app1 https://$server_name;
    }

    location /app2/ {
        #try_files $uri $uri/ /index.html?$query_string;
        proxy_pass http://nginx-reverse-proxy-app2;
        proxy_redirect http://nginx-reverse-proxy-app2 https://$server_name;
    }
}